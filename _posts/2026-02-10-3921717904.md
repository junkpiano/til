---
layout: post
title: 'Ubuntu 24.04: "No Wi-Fi Adapter Found" on Intel Core Ultra (ILL) – fixed by forcing OEM kernel via GRUB'
date: 2026-02-10 14:16:08 +0000
category: linux
---

## Summary

On Ubuntu 24.04 LTS running on a laptop with an Intel Core Ultra (ILL) CPU and Intel Wi-Fi (Wi-Fi 7 class), Wi-Fi was completely unavailable even though the device was detected at the PCI level.

The issue was not missing drivers, but booting an incompatible kernel.
The system was stuck booting a newer mainline kernel, while a working OEM kernel was already installed but never selected.

The issue was resolved by forcing GRUB to boot the OEM kernel (6.14) and updating GRUB.

## Environment

- OS: Ubuntu 24.04 LTS
- Hardware: Laptop with Intel Core Ultra (ILL) CPU
- Wi-Fi: Intel Wi-Fi (Wi-Fi 7 class, e.g. Intel Corporation Device a840)
- Firmware: Standard linux-firmware from Ubuntu repos
- Boot mode: UEFI (GRUB menu hidden by default)

## Symptoms

GNOME Network Settings shows: “No Wi-Fi Adapter Found”
Wi-Fi device is detected:

```
lspci | grep -i network
```

But driver is not bound:

```
sudo lshw -C network
# *-network UNCLAIMED
```

## Investigation

The system was booting into a newer mainline kernel:

```
uname -r
# 6.17.0-14-generic
```

However, a stable OEM kernel was already present:

```
ls /boot | grep vmlinuz
# vmlinuz-6.14.0-37-generic
# vmlinuz-6.17.0-14-generic
```

Because the GRUB menu was hidden (UEFI fast boot), the system always booted into 6.17, which caused a kernel–firmware mismatch.
As a result, iwlwifi failed to claim the device (UNCLAIMED).

## Root Cause

- Intel Wi-Fi drivers (iwlwifi) are highly sensitive to kernel ↔ firmware compatibility
- Kernel 6.17 was too new for the shipped firmware
- Kernel 6.14 (OEM) contains backported fixes suitable for this hardware
- GRUB never selected 6.14 automatically
- This is not a DKMS or driver installation issue.

## Solution (What Fixed It)

Force GRUB to always boot the OEM kernel and update GRUB:

```
sudo sed -i 's/^GRUB_DEFAULT=.*/GRUB_DEFAULT="Advanced options for Ubuntu>Ubuntu, with Linux 6.14.0-37-generic"/' /etc/default/grub
sudo update-grub
sudo reboot
```

After reboot:

```
uname -r
# 6.14.0-37-generic
```

Then reinstall firmware:

```
sudo apt update
sudo apt install --reinstall linux-firmware
sudo reboot
```

Wi-Fi immediately became available.

## Cleanup (Recommended)

After confirming stability:

```
sudo apt remove 'linux-image-6.17.*' 'linux-headers-6.17.*'
sudo apt autoremove
sudo update-grub
```

## Lessons / Notes

1. UNCLAIMED often indicates a kernel/firmware mismatch, not missing drivers
2. On new Intel Core Ultra (ILL) systems, OEM kernels may be required
3. Hidden GRUB menus on UEFI systems can silently lock users into a broken kernel
4. update-grub is a critical step when dealing with kernel selection

## Expected Improvement

It would be helpful if Ubuntu:

- Preferred OEM kernels automatically on supported hardware, or
- Warned when booting experimental/mainline kernels that break firmware compatibility

---
[discussion](https://github.com/junkpiano/til/issues/47)
